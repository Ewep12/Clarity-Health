<!DOCTYPE html>
<html lang="pt-br">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Clarity Health - Monitore sua Glicemia</title>
  <link rel="stylesheet" href="style.css">
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
</head>
<body>
  <header class="navbar">
    <div class="nav-left">
      <a href="index.html" class="logo">Clarity Health</a>
      <nav>
        <a href="index.html" class="active">InÃ­cio</a>
        <a href="registro.html">Registrar</a>
        <a href="historico.html">HistÃ³rico</a> 
        <a href="emergencia.html">EmergÃªncia</a>
      </nav>
    </div>

    <div class="nav-right">
      <div class="user-menu-wrap" id="userMenuWrap">
        <button class="user-menu-btn" id="userMenuBtn" aria-expanded="false" aria-haspopup="true">
            <img id="userAvatarSmall" class="user-menu-avatar"
                  src="/mnt/data/9cebf04c-2d9b-4569-9ee8-fd1ef0503fd2.png" alt="Avatar do UsuÃ¡rio">
            <span class="user-menu-name" id="userMenuName">Carregando...</span>
            <svg width="14" height="14" viewBox="0 0 24 24"><path d="M7 10l5 5 5-5z" fill="currentColor"/></svg>
        </button>

        <div class="user-menu-dropdown" id="userMenuDropdown">
            <div class="umd-header">
                <img id="umdAvatarImg" class="umd-avatar"
                      src="/mnt/data/9cebf04c-2d9b-4569-9ee8-fd1ef0503fd2.png" alt="Avatar do UsuÃ¡rio">
                <div class="umd-info">
                    <div class="umd-name" id="umdName">Carregando...</div>
                    <div class="umd-username" id="umdUsername">@usuario</div>
                </div>
            </div>

            <div class="umd-item" id="menuAtualizarDados">ğŸ”„ Atualizar dados</div>
            <div class="umd-item" id="menuConfiguracoes">âš™ï¸ ConfiguraÃ§Ãµes</div>
            <div class="umd-item" id="menuAjuda">â“ Ajuda</div>

            <div class="umd-sep"></div>
            <div class="umd-item" id="menuTemaToggle" style="display:flex; align-items:center; gap:8px;">
                <span id="temaIcon">ğŸŒ“</span>
                <span id="temaLabel">Modo Escuro</span>
                <label class="switch" style="margin-left:auto">
                  <input type="checkbox" id="temaCheckbox">
                  <span class="slider"></span>
                </label>
            </div>

            <div class="umd-sep"></div>

            <div class="umd-item umd-item-logout" id="menuLogout">â†©ï¸ Sair</div>
        </div>
      </div>
    </div>
  </header>
  
  <main class="container">

    <section class="welcome-card">
      <h2><i class="fas fa-heartbeat"></i> Bem-vindo(a)!</h2>
      <p>Monitore sua glicemia e receba alertas de hipoglicemia de forma simples, rÃ¡pida e moderna.</p>
      <a href="registro.html" class="btn btn-primary">Registrar Glicemia</a>
    </section>

<section class="analysis-card">
    <div class="analysis-header">
        <div>
            <h2>ğŸ“Š AnÃ¡lise de Dados (IA)</h2>
            <div id="analysis-chip">Ãšltima anÃ¡lise: â€”</div>
        </div>
        <div class="analysis-trend">
            <small>ProjeÃ§Ã£o a 30 min</small>
            <canvas id="analysisTrend" aria-label="GrÃ¡fico de tendÃªncia"></canvas>
            <div style="text-align: center;">TendÃªncia</div>
        </div>
    </div>

    <div class="analysis-body">
        <div id="analysis-message">Carregando anÃ¡lise...</div>
    </div>

    <div class="analysis-actions">
        <button id="btn-refresh-analysis" class="btn">Atualizar</button>
        <a href="historico.html" class="btn btn-small btn-primary">Ver HistÃ³rico</a>
    </div>
</section>

    <section class="info-cards">
      <div class="card">
        <h2>ğŸ’¡ Nossa Ideia: Monitoramento Inteligente</h2>
        <p>O Clarity Health vai alÃ©m de um simples diÃ¡rio de glicemia. Nossa missÃ£o Ã© transformar dados brutos em previsÃµes acionÃ¡veis usando Aprendizado de MÃ¡quina (Machine Learning).</p>
        
        <h3>Como Funciona o Aplicativo:</h3>
        <ul>
            <li>Registro Completo: VocÃª insere o valor da glicemia, alÃ©m de informaÃ§Ãµes cruciais como refeiÃ§Ãµes e exercÃ­cios.</li>
            <li>AnÃ¡lise em Tempo Real: A cada novo registro, nosso sistema calcula a tendÃªncia imediata (taxa de mudanÃ§a).</li>
            <li>PrevisÃ£o Inteligente (IA): ApÃ³s coletar dados suficientes (mÃ­nimo de 20 registros), um modelo de RegressÃ£o Ridge (do Scikit-learn) Ã© treinado para analisar seus padrÃµes histÃ³ricos e prever se vocÃª tem risco de Hipoglicemia ou Hiperglicemia nos prÃ³ximos 30 minutos.</li>
            <li>Alerta PrÃ³-ativo: VocÃª recebe uma mensagem de risco antes que a situaÃ§Ã£o se concretize, permitindo correÃ§Ãµes e ajustes de forma preventiva.</li>
        </ul>
      </div>
    </section>

    <section class="info-cards">
      <div class="card">
        <h3><i class="fas fa-history"></i> HistÃ³rico</h3>
        <p>Visualize todos os registros e acompanhe seus nÃ­veis de glicemia em grÃ¡ficos.</p>
        <a href="historico.html" class="btn-small">Ver histÃ³rico</a>
      </div>
      <div class="card">
        <h3><i class="fas fa-exclamation-triangle"></i> EmergÃªncia</h3>
        <p>Saiba o que fazer em caso de hipoglicemia com nosso guia rÃ¡pido de aÃ§Ã£o.</p>
        <a href="emergencia.html" class="btn-small">Ver guia</a>
      </div>
    </section>
  </main>

  <footer>
    <p>Â© 2025 Clarity Health</p>
  </footer>

  <div class="modal" id="modalUpdate" aria-hidden="true">
    <div class="modal-panel">
      <header class="modal-header"><h3>Atualizar Dados</h3><button class="modal-close" data-target="modalUpdate">âœ•</button></header>
      <div class="modal-body">
        <label>Email</label>
        <input id="modalEmail" type="text" readonly>
        <label>Seu chat_id (Telegram)</label>
        <input id="modalTelegramChat" type="text" placeholder="8439454986">
        <label>Trusted chat_id</label>
        <input id="modalTrustedChat" type="text" placeholder="8598492955">
      </div>
      <footer class="modal-footer">
        <button id="modalSave" class="btn btn-primary">Salvar</button>
        <button class="btn" data-target="modalUpdate">Cancelar</button>
      </footer>
    </div>
  </div>

  <div class="modal" id="modalConfig" aria-hidden="true">
    <div class="modal-panel">
      <header class="modal-header"><h3>ConfiguraÃ§Ãµes</h3><button class="modal-close" data-target="modalConfig">âœ•</button></header>
      <div class="modal-body">
        <label>PreferÃªncia de notificaÃ§Ã£o</label>
        <select id="cfgNotifications">
          <option value="all">Todas</option>
          <option value="only_low">SÃ³ alerta baixo</option>
          <option value="none">Nenhuma</option>
        </select>

        <label style="margin-top:12px">Idioma</label>
        <select id="cfgLocale">
          <option value="pt-BR">PortuguÃªs (BR)</option>
          <option value="en-US">English (US)</option>
        </select>
      </div>
      <footer class="modal-footer">
        <button id="cfgSave" class="btn btn-primary">Salvar</button>
        <button class="btn" data-target="modalConfig">Fechar</button>
      </footer>
    </div>
  </div>

  <div class="modal" id="modalHelp" aria-hidden="true">
    <div class="modal-panel">
      <header class="modal-header"><h3>Ajuda</h3><button class="modal-close" data-target="modalHelp">âœ•</button></header>
      <div class="modal-body">
        <p>Se precisar de ajuda, entre em contato com support@seusite.com ou consulte o manual.</p>
        <p>VocÃª tambÃ©m pode enviar um relatÃ³rio via chat.</p>
      </div>
      <footer class="modal-footer">
        <button class="btn" data-target="modalHelp">Fechar</button>
      </footer>
    </div>
  </div>

  <script src="script.js"></script>
</body>
</html>